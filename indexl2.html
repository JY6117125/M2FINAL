<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script src="https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js"></script>

</head>
<body>

<script>
class stateinfo {
  constructor(abbreviations) {
    this.abbreviations = abbreviations;
  }
    statelo(){
    console.log(data["usStates"][this.abbreviations]["location"][0]);
    return rx=data["usStates"][this.abbreviations]["location"][0],ry=data["usStates"][this.abbreviations]["location"][1]
  }
}
let input, button, greeting,abbreviation,data,x=50,y=50,lockxy,rx,ry;


function setup() {
    data=loadJSON("answerandlocation.json");
    createCanvas(850, 650);
    img = loadImage('33-23.png'); // Load the image
    background(img);
    checkab();
    const state=new stateinfo("CA");
    state.statelo();
}

function checkab(){
    input = createInput();
    input.position(850, 95);
     button = createButton('submit');
     button.position(input.x + input.width, 95);
    button.mousePressed(checkabbreviation);
    greeting = createElement('h3', "Input the State's abbreviation ");
    greeting.position(850, 5);
    textAlign(CENTER);
    textSize(10);
}

function checkabbreviation() {
    abbreviation = input.value();
    if (Object.keys(data.usStates).includes(abbreviation)){
    greeting.html('Your anwer is right ' + abbreviation + '!');  
    return abbreviation
    }
    else { greeting.html('Try again!');
    input.value('');
    }
}


// function mouseMoved(event) {
//   if  (lockxy==true||lockxy!==false){
//   x=mouseX,y=mouseY;}
// }
// function doubleClicked (event) {
//    return lockxy=false;
// }
// function  mouseClicked(event) {   
//   return lockxy=true,x=mouseX,y=mouseY
// }
function mouseDragged(event) {
    x=mouseX,y=mouseY;
}
function mouseReleased(event) {
    checkxy()  
    }
function checkxy() {
   if(x!==rx+10&&y!==ry+10&&x!==rx-10&&y!==ry-10){//remove the "!" after import the data from json 
    greeting.html('good job')
   }
   else {"try again"}
}

function draw() {
    image(img, 0, 0);
    text(abbreviation,x ,y);

}
    
</script>

</body>
</html>