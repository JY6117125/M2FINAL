<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Document</title>
</head>
<style>
.draggable{
    cursor: move;
    background-color: rgb(0, 255, 149);
    border: 3px solid black;
    size: 1px;
}
#AnswersListblock{
    top: 110px;
    left: 630px;
    border: 5px rgb(187, 74, 74) solid;
    background-color:antiquewhite;
    position: absolute;
    z-index: 1;
    width: 220px;
    height: 350px;
    overflow: auto;
    text-align: center;
}

main{
    border: 5px solid black;
    margin: 10px;
    top: 50px;
    left: 0px;
    size: 100px;
    width: 600px;
    height: 400px;
    position: absolute;

}
.dragging{
    opacity: 0.5;
}
    
</style>
<body>

<div id="AnswersListblock" >
    <h3 id="header" >
        Your Answers List
    </h3>


<ul id="userlist">
    <li class="draggable" draggable="true"> nothing, yet</li>
    <li class="draggable" draggable="true"> nothing, yet</li>
    <li class="draggable" draggable="true"> nothing, yet</li>
    <li class="draggable" draggable="true"> nothing, yet</li>
    <li class="draggable" draggable="true"> nothing, yet</li>
    <li class="draggable" draggable="true"> nothing, yet</li>
    <li class="draggable" draggable="true"> nothing, yet</li>

</ul>

</div>
<script>
    var data
    var useranswerlist=[] 
    function preload(){
        data=loadJSON("answerandlocation.json");
        img = loadImage('33-23.png');//loading-map
    }
    function setup() {
  // create canvas
        createCanvas(1000, 446);   
        image(img, 0, 0,600,400);
        input = createInput();
        input.position(630, 65);

        button = createButton('Check');
        button.position(input.x + input.width, 65);
        button.mousePressed(checkabbreviation);
        greeting = createElement('h5', 'State name and abbreviation');
        greeting.position(630, 25);

}
//checking answer AND 
function checkabbreviation() {
  const name = input.value();
  if (Object.keys(data.usStates).includes(name)){
    greeting.html('Your anwer is right ' + name + '!');
    if(!useranswerlist.includes(name) ){

     sdattrb()
    }
    else { greeting.html(name + ' existed!');
    }
}
else { greeting.html('Try again');
    }
     //store it into user answer list
function sdattrb(){
     useranswerlist.push(name);
     let newstateitem=document.createElement('li');
     newstateitem.textContent = name;
     newstateitem.setAttribute('class',"draggable");
     newstateitem.setAttribute("draggable","true");
//appending the user input into a list
     userlist.appendChild(newstateitem)
    }
}
const draggables =document.querySelectorAll(".draggable")
const draganddrowarea =document.querySelectorAll("#userlist,#defaultCanvas0")
draggables.forEach(draggable=>{
    draggable.addEventListener('dragstart',() => {draggable.classList.add('dragging')
})
    draggable.addEventListener('dragend',()=>{
        draggable.classList.remove('dragging')
    })
})

draganddrowarea.forEach(defaultCanvas0 =>{
    userlist.addEventListener("dragover",()=>{console.log("aaa")}
    )
})

// class state {
//     constructor(abbreviation) {
//    // this.abbreviation= abbreviation;
//    // this.name= name;
//    this.abbreviation=abbreviation
//     }
//     convertx(){
//         let consolesing= () => {
//         data.usStates.this.abbreviation.location[0];}
         
//     }
// }
// const ca=new state("CA")
// ca.convertx()



function draw() {
        text(data.usStates.CA.name,50,200)
        text(data.usStates.TX.name,data.usStates.TX.location[0],data.usStates.TX.location[1])
        text(data.usStates.WA.name,data.usStates.WA.location[0],data.usStates.WA.location[1])
        text(data.usStates.ME.name,data.usStates.ME.location[0],data.usStates.ME.location[1])

        // 坐标x
        // console.log(convert(31.968599,-99.901813))
        text("ME",
692.9040805555555,110.87118212222222)
        text("WA", 164.610725, 104.68344997777777)
        text("TX",  222.49496388888886, 143.7889158111111)

        const userlist = document.getElementById('userlist')
    }


MAP_WIDTH = 1000;
MAP_HEIGHT = 446;
function convert(lat, lon){
    var y = ((-1 * lat) + 90) * (MAP_HEIGHT / 180);
    var x = (lon + 180) * (MAP_WIDTH / 360);
    return [x,y];
}

</script>

</script><script src="https://cdn.jsdelivr.net/npm/p5@1.5.0/lib/p5.js"></script>
</body>
</html>